{
  "version": 3,
  "sources": ["rnnoise.js", "../../src/utils/audioResampler.js", "../../src/worklets/rnnoise-worklet.source.js"],
  "sourcesContent": ["\nvar createRNNWasmModule = (() => {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  \n  return (\nfunction(createRNNWasmModule) {\n  createRNNWasmModule = createRNNWasmModule || {};\n\nnull;\n\nvar Module = typeof createRNNWasmModule != \"undefined\" ? createRNNWasmModule : {};\n\nvar readyPromiseResolve, readyPromiseReject;\n\nModule[\"ready\"] = new Promise(function(resolve, reject) {\n readyPromiseResolve = resolve;\n readyPromiseReject = reject;\n});\n\nvar moduleOverrides = Object.assign({}, Module);\n\nvar arguments_ = [];\n\nvar thisProgram = \"./this.program\";\n\nvar quit_ = (status, toThrow) => {\n throw toThrow;\n};\n\nvar ENVIRONMENT_IS_WEB = typeof window == \"object\";\n\nvar ENVIRONMENT_IS_WORKER = typeof importScripts == \"function\";\n\nvar ENVIRONMENT_IS_NODE = typeof process == \"object\" && typeof process.versions == \"object\" && typeof process.versions.node == \"string\";\n\nvar scriptDirectory = \"\";\n\nfunction locateFile(path) {\n if (Module[\"locateFile\"]) {\n  return Module[\"locateFile\"](path, scriptDirectory);\n }\n return scriptDirectory + path;\n}\n\nvar read_, readAsync, readBinary, setWindowTitle;\n\nif (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) {\n if (ENVIRONMENT_IS_WORKER) {\n  scriptDirectory = self.location.href;\n } else if (typeof document != \"undefined\" && document.currentScript) {\n  scriptDirectory = document.currentScript.src;\n }\n if (_scriptDir) {\n  scriptDirectory = _scriptDir;\n }\n if (scriptDirectory.indexOf(\"blob:\") !== 0) {\n  scriptDirectory = scriptDirectory.substr(0, scriptDirectory.replace(/[?#].*/, \"\").lastIndexOf(\"/\") + 1);\n } else {\n  scriptDirectory = \"\";\n }\n {\n  read_ = url => {\n   var xhr = new XMLHttpRequest();\n   xhr.open(\"GET\", url, false);\n   xhr.send(null);\n   return xhr.responseText;\n  };\n  if (ENVIRONMENT_IS_WORKER) {\n   readBinary = url => {\n    var xhr = new XMLHttpRequest();\n    xhr.open(\"GET\", url, false);\n    xhr.responseType = \"arraybuffer\";\n    xhr.send(null);\n    return new Uint8Array(xhr.response);\n   };\n  }\n  readAsync = (url, onload, onerror) => {\n   var xhr = new XMLHttpRequest();\n   xhr.open(\"GET\", url, true);\n   xhr.responseType = \"arraybuffer\";\n   xhr.onload = () => {\n    if (xhr.status == 200 || xhr.status == 0 && xhr.response) {\n     onload(xhr.response);\n     return;\n    }\n    onerror();\n   };\n   xhr.onerror = onerror;\n   xhr.send(null);\n  };\n }\n setWindowTitle = title => document.title = title;\n} else {}\n\nvar out = Module[\"print\"] || console.log.bind(console);\n\nvar err = Module[\"printErr\"] || console.warn.bind(console);\n\nObject.assign(Module, moduleOverrides);\n\nmoduleOverrides = null;\n\nif (Module[\"arguments\"]) arguments_ = Module[\"arguments\"];\n\nif (Module[\"thisProgram\"]) thisProgram = Module[\"thisProgram\"];\n\nif (Module[\"quit\"]) quit_ = Module[\"quit\"];\n\nvar wasmBinary;\n\nif (Module[\"wasmBinary\"]) wasmBinary = Module[\"wasmBinary\"];\n\nvar noExitRuntime = Module[\"noExitRuntime\"] || true;\n\nif (typeof WebAssembly != \"object\") {\n abort(\"no native wasm support detected\");\n}\n\nvar wasmMemory;\n\nvar ABORT = false;\n\nvar EXITSTATUS;\n\nvar buffer, HEAP8, HEAPU8, HEAP16, HEAPU16, HEAP32, HEAPU32, HEAPF32, HEAPF64;\n\nfunction updateGlobalBufferAndViews(buf) {\n buffer = buf;\n Module[\"HEAP8\"] = HEAP8 = new Int8Array(buf);\n Module[\"HEAP16\"] = HEAP16 = new Int16Array(buf);\n Module[\"HEAP32\"] = HEAP32 = new Int32Array(buf);\n Module[\"HEAPU8\"] = HEAPU8 = new Uint8Array(buf);\n Module[\"HEAPU16\"] = HEAPU16 = new Uint16Array(buf);\n Module[\"HEAPU32\"] = HEAPU32 = new Uint32Array(buf);\n Module[\"HEAPF32\"] = HEAPF32 = new Float32Array(buf);\n Module[\"HEAPF64\"] = HEAPF64 = new Float64Array(buf);\n}\n\nvar INITIAL_MEMORY = Module[\"INITIAL_MEMORY\"] || 16777216;\n\nvar wasmTable;\n\nvar __ATPRERUN__ = [];\n\nvar __ATINIT__ = [];\n\nvar __ATPOSTRUN__ = [];\n\nvar runtimeInitialized = false;\n\nfunction preRun() {\n if (Module[\"preRun\"]) {\n  if (typeof Module[\"preRun\"] == \"function\") Module[\"preRun\"] = [ Module[\"preRun\"] ];\n  while (Module[\"preRun\"].length) {\n   addOnPreRun(Module[\"preRun\"].shift());\n  }\n }\n callRuntimeCallbacks(__ATPRERUN__);\n}\n\nfunction initRuntime() {\n runtimeInitialized = true;\n callRuntimeCallbacks(__ATINIT__);\n}\n\nfunction postRun() {\n if (Module[\"postRun\"]) {\n  if (typeof Module[\"postRun\"] == \"function\") Module[\"postRun\"] = [ Module[\"postRun\"] ];\n  while (Module[\"postRun\"].length) {\n   addOnPostRun(Module[\"postRun\"].shift());\n  }\n }\n callRuntimeCallbacks(__ATPOSTRUN__);\n}\n\nfunction addOnPreRun(cb) {\n __ATPRERUN__.unshift(cb);\n}\n\nfunction addOnInit(cb) {\n __ATINIT__.unshift(cb);\n}\n\nfunction addOnPostRun(cb) {\n __ATPOSTRUN__.unshift(cb);\n}\n\nvar runDependencies = 0;\n\nvar runDependencyWatcher = null;\n\nvar dependenciesFulfilled = null;\n\nfunction addRunDependency(id) {\n runDependencies++;\n if (Module[\"monitorRunDependencies\"]) {\n  Module[\"monitorRunDependencies\"](runDependencies);\n }\n}\n\nfunction removeRunDependency(id) {\n runDependencies--;\n if (Module[\"monitorRunDependencies\"]) {\n  Module[\"monitorRunDependencies\"](runDependencies);\n }\n if (runDependencies == 0) {\n  if (runDependencyWatcher !== null) {\n   clearInterval(runDependencyWatcher);\n   runDependencyWatcher = null;\n  }\n  if (dependenciesFulfilled) {\n   var callback = dependenciesFulfilled;\n   dependenciesFulfilled = null;\n   callback();\n  }\n }\n}\n\nfunction abort(what) {\n {\n  if (Module[\"onAbort\"]) {\n   Module[\"onAbort\"](what);\n  }\n }\n what = \"Aborted(\" + what + \")\";\n err(what);\n ABORT = true;\n EXITSTATUS = 1;\n what += \". Build with -sASSERTIONS for more info.\";\n var e = new WebAssembly.RuntimeError(what);\n readyPromiseReject(e);\n throw e;\n}\n\nvar dataURIPrefix = \"data:application/octet-stream;base64,\";\n\nfunction isDataURI(filename) {\n return filename.startsWith(dataURIPrefix);\n}\n\nvar wasmBinaryFile;\n\nwasmBinaryFile = \"rnnoise.wasm\";\n\nif (!isDataURI(wasmBinaryFile)) {\n wasmBinaryFile = locateFile(wasmBinaryFile);\n}\n\nfunction getBinary(file) {\n try {\n  if (file == wasmBinaryFile && wasmBinary) {\n   return new Uint8Array(wasmBinary);\n  }\n  if (readBinary) {\n   return readBinary(file);\n  } else {\n   throw \"both async and sync fetching of the wasm failed\";\n  }\n } catch (err) {\n  abort(err);\n }\n}\n\nfunction getBinaryPromise() {\n if (!wasmBinary && (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER)) {\n  if (typeof fetch == \"function\") {\n   return fetch(wasmBinaryFile, {\n    credentials: \"same-origin\"\n   }).then(function(response) {\n    if (!response[\"ok\"]) {\n     throw \"failed to load wasm binary file at '\" + wasmBinaryFile + \"'\";\n    }\n    return response[\"arrayBuffer\"]();\n   }).catch(function() {\n    return getBinary(wasmBinaryFile);\n   });\n  }\n }\n return Promise.resolve().then(function() {\n  return getBinary(wasmBinaryFile);\n });\n}\n\nfunction createWasm() {\n var info = {\n  \"a\": asmLibraryArg\n };\n function receiveInstance(instance, module) {\n  var exports = instance.exports;\n  Module[\"asm\"] = exports;\n  wasmMemory = Module[\"asm\"][\"c\"];\n  updateGlobalBufferAndViews(wasmMemory.buffer);\n  wasmTable = Module[\"asm\"][\"k\"];\n  addOnInit(Module[\"asm\"][\"d\"]);\n  removeRunDependency(\"wasm-instantiate\");\n }\n addRunDependency(\"wasm-instantiate\");\n function receiveInstantiationResult(result) {\n  receiveInstance(result[\"instance\"]);\n }\n function instantiateArrayBuffer(receiver) {\n  return getBinaryPromise().then(function(binary) {\n   return WebAssembly.instantiate(binary, info);\n  }).then(function(instance) {\n   return instance;\n  }).then(receiver, function(reason) {\n   err(\"failed to asynchronously prepare wasm: \" + reason);\n   abort(reason);\n  });\n }\n function instantiateAsync() {\n  if (!wasmBinary && typeof WebAssembly.instantiateStreaming == \"function\" && !isDataURI(wasmBinaryFile) && typeof fetch == \"function\") {\n   return fetch(wasmBinaryFile, {\n    credentials: \"same-origin\"\n   }).then(function(response) {\n    var result = WebAssembly.instantiateStreaming(response, info);\n    return result.then(receiveInstantiationResult, function(reason) {\n     err(\"wasm streaming compile failed: \" + reason);\n     err(\"falling back to ArrayBuffer instantiation\");\n     return instantiateArrayBuffer(receiveInstantiationResult);\n    });\n   });\n  } else {\n   return instantiateArrayBuffer(receiveInstantiationResult);\n  }\n }\n if (Module[\"instantiateWasm\"]) {\n  try {\n   var exports = Module[\"instantiateWasm\"](info, receiveInstance);\n   return exports;\n  } catch (e) {\n   err(\"Module.instantiateWasm callback failed with error: \" + e);\n   return false;\n  }\n }\n instantiateAsync().catch(readyPromiseReject);\n return {};\n}\n\nfunction callRuntimeCallbacks(callbacks) {\n while (callbacks.length > 0) {\n  var callback = callbacks.shift();\n  if (typeof callback == \"function\") {\n   callback(Module);\n   continue;\n  }\n  var func = callback.func;\n  if (typeof func == \"number\") {\n   if (callback.arg === undefined) {\n    getWasmTableEntry(func)();\n   } else {\n    getWasmTableEntry(func)(callback.arg);\n   }\n  } else {\n   func(callback.arg === undefined ? null : callback.arg);\n  }\n }\n}\n\nfunction getWasmTableEntry(funcPtr) {\n return wasmTable.get(funcPtr);\n}\n\nfunction _emscripten_memcpy_big(dest, src, num) {\n HEAPU8.copyWithin(dest, src, src + num);\n}\n\nfunction getHeapMax() {\n return 2147483648;\n}\n\nfunction emscripten_realloc_buffer(size) {\n try {\n  wasmMemory.grow(size - buffer.byteLength + 65535 >>> 16);\n  updateGlobalBufferAndViews(wasmMemory.buffer);\n  return 1;\n } catch (e) {}\n}\n\nfunction _emscripten_resize_heap(requestedSize) {\n var oldSize = HEAPU8.length;\n requestedSize = requestedSize >>> 0;\n var maxHeapSize = getHeapMax();\n if (requestedSize > maxHeapSize) {\n  return false;\n }\n let alignUp = (x, multiple) => x + (multiple - x % multiple) % multiple;\n for (var cutDown = 1; cutDown <= 4; cutDown *= 2) {\n  var overGrownHeapSize = oldSize * (1 + .2 / cutDown);\n  overGrownHeapSize = Math.min(overGrownHeapSize, requestedSize + 100663296);\n  var newSize = Math.min(maxHeapSize, alignUp(Math.max(requestedSize, overGrownHeapSize), 65536));\n  var replacement = emscripten_realloc_buffer(newSize);\n  if (replacement) {\n   return true;\n  }\n }\n return false;\n}\n\nvar asmLibraryArg = {\n \"b\": _emscripten_memcpy_big,\n \"a\": _emscripten_resize_heap\n};\n\nvar asm = createWasm();\n\nvar ___wasm_call_ctors = Module[\"___wasm_call_ctors\"] = function() {\n return (___wasm_call_ctors = Module[\"___wasm_call_ctors\"] = Module[\"asm\"][\"d\"]).apply(null, arguments);\n};\n\nvar _rnnoise_init = Module[\"_rnnoise_init\"] = function() {\n return (_rnnoise_init = Module[\"_rnnoise_init\"] = Module[\"asm\"][\"e\"]).apply(null, arguments);\n};\n\nvar _rnnoise_create = Module[\"_rnnoise_create\"] = function() {\n return (_rnnoise_create = Module[\"_rnnoise_create\"] = Module[\"asm\"][\"f\"]).apply(null, arguments);\n};\n\nvar _malloc = Module[\"_malloc\"] = function() {\n return (_malloc = Module[\"_malloc\"] = Module[\"asm\"][\"g\"]).apply(null, arguments);\n};\n\nvar _rnnoise_destroy = Module[\"_rnnoise_destroy\"] = function() {\n return (_rnnoise_destroy = Module[\"_rnnoise_destroy\"] = Module[\"asm\"][\"h\"]).apply(null, arguments);\n};\n\nvar _free = Module[\"_free\"] = function() {\n return (_free = Module[\"_free\"] = Module[\"asm\"][\"i\"]).apply(null, arguments);\n};\n\nvar _rnnoise_process_frame = Module[\"_rnnoise_process_frame\"] = function() {\n return (_rnnoise_process_frame = Module[\"_rnnoise_process_frame\"] = Module[\"asm\"][\"j\"]).apply(null, arguments);\n};\n\nvar calledRun;\n\ndependenciesFulfilled = function runCaller() {\n if (!calledRun) run();\n if (!calledRun) dependenciesFulfilled = runCaller;\n};\n\nfunction run(args) {\n args = args || arguments_;\n if (runDependencies > 0) {\n  return;\n }\n preRun();\n if (runDependencies > 0) {\n  return;\n }\n function doRun() {\n  if (calledRun) return;\n  calledRun = true;\n  Module[\"calledRun\"] = true;\n  if (ABORT) return;\n  initRuntime();\n  readyPromiseResolve(Module);\n  if (Module[\"onRuntimeInitialized\"]) Module[\"onRuntimeInitialized\"]();\n  postRun();\n }\n if (Module[\"setStatus\"]) {\n  Module[\"setStatus\"](\"Running...\");\n  setTimeout(function() {\n   setTimeout(function() {\n    Module[\"setStatus\"](\"\");\n   }, 1);\n   doRun();\n  }, 1);\n } else {\n  doRun();\n }\n}\n\nModule[\"run\"] = run;\n\nif (Module[\"preInit\"]) {\n if (typeof Module[\"preInit\"] == \"function\") Module[\"preInit\"] = [ Module[\"preInit\"] ];\n while (Module[\"preInit\"].length > 0) {\n  Module[\"preInit\"].pop()();\n }\n}\n\nrun();\n\n\n  return createRNNWasmModule.ready\n}\n);\n})();\nexport default createRNNWasmModule;", "/**\n * High-Quality Audio Resampler\n * Implements anti-aliasing FIR filter + decimation for 48kHz \u2192 24kHz\n * Using Kaiser window for optimal stopband attenuation\n */\n\nexport class AudioResampler {\n  constructor() {\n    // Design parameters for 48kHz \u2192 24kHz (2:1 decimation)\n    this.decimationFactor = 2;\n    this.cutoffFreq = 0.4; // Well below Nyquist (0.5) for excellent anti-aliasing\n    this.filterOrder = 63; // Higher order = better stopband attenuation, minimal aliasing\n    this.beta = 7.5; // Kaiser window parameter (7.5 = better stopband rejection)\n\n    // Pre-compute FIR filter coefficients\n    this.filterCoeffs = this.designKaiserLowpass(\n      this.filterOrder,\n      this.cutoffFreq,\n      this.beta\n    );\n\n    // State buffer for FIR filtering (overlapping samples)\n    this.stateBuffer = new Float32Array(this.filterOrder);\n    this.statePos = 0;\n\n    console.log(\n      `[Resampler] Initialized: ${this.filterOrder}-tap Kaiser FIR, cutoff=${this.cutoffFreq}`\n    );\n  }\n\n  /**\n   * Design Kaiser-windowed lowpass FIR filter\n   * @param {number} order - Filter order (number of taps)\n   * @param {number} cutoff - Normalized cutoff frequency (0-1)\n   * @param {number} beta - Kaiser window beta parameter\n   * @returns {Float32Array} Filter coefficients\n   */\n  designKaiserLowpass(order, cutoff, beta) {\n    const M = order;\n    const coeffs = new Float32Array(M + 1);\n    const center = M / 2;\n\n    // Generate ideal sinc lowpass\n    for (let n = 0; n <= M; n++) {\n      if (n === center) {\n        coeffs[n] = 2 * cutoff; // sinc(0) = 1\n      } else {\n        const x = (n - center) * Math.PI;\n        coeffs[n] =\n          (Math.sin(2 * cutoff * x) / x) * this.kaiserWindow(n, M, beta);\n      }\n    }\n\n    // Normalize to unity gain at DC\n    const sum = coeffs.reduce((a, b) => a + b, 0);\n    for (let i = 0; i <= M; i++) {\n      coeffs[i] /= sum;\n    }\n\n    return coeffs;\n  }\n\n  /**\n   * Kaiser window function\n   * @param {number} n - Sample index\n   * @param {number} M - Window length - 1\n   * @param {number} beta - Shape parameter\n   * @returns {number} Window value\n   */\n  kaiserWindow(n, M, beta) {\n    const arg = beta * Math.sqrt(1 - Math.pow((2 * n) / M - 1, 2));\n    return this.besselI0(arg) / this.besselI0(beta);\n  }\n\n  /**\n   * Modified Bessel function of the first kind, order 0\n   * Used in Kaiser window calculation\n   * @param {number} x - Input value\n   * @returns {number} I0(x)\n   */\n  besselI0(x) {\n    let sum = 1.0;\n    let term = 1.0;\n    let m = 1;\n\n    // Series expansion (sufficient accuracy with 25 terms)\n    while (m < 25) {\n      term *= (x * x) / (4 * m * m);\n      sum += term;\n      m++;\n    }\n\n    return sum;\n  }\n\n  /**\n   * Apply FIR filter to input buffer\n   * @param {Float32Array} input - Input samples @ 48kHz\n   * @returns {Float32Array} Filtered samples @ 48kHz\n   */\n  applyFirFilter(input) {\n    const output = new Float32Array(input.length);\n    const M = this.filterOrder;\n\n    for (let n = 0; n < input.length; n++) {\n      let sum = 0;\n\n      // Convolve with FIR coefficients\n      for (let k = 0; k <= M; k++) {\n        const idx = n - k;\n        let sample;\n\n        if (idx >= 0) {\n          sample = input[idx];\n        } else {\n          // Use state buffer for past samples\n          const stateIdx =\n            (this.statePos + idx + this.stateBuffer.length) %\n            this.stateBuffer.length;\n          sample = this.stateBuffer[stateIdx];\n        }\n\n        sum += this.filterCoeffs[k] * sample;\n      }\n\n      output[n] = sum;\n    }\n\n    // Update state buffer with last M samples\n    for (let i = 0; i < Math.min(M, input.length); i++) {\n      this.stateBuffer[(this.statePos + i) % this.stateBuffer.length] =\n        input[input.length - M + i];\n    }\n    this.statePos =\n      (this.statePos + Math.min(M, input.length)) % this.stateBuffer.length;\n\n    return output;\n  }\n\n  /**\n   * Resample 48kHz \u2192 24kHz with anti-aliasing\n   * @param {Float32Array} input48k - Input samples @ 48kHz\n   * @returns {Float32Array} Output samples @ 24kHz\n   */\n  resample48to24(input48k) {\n    // Step 1: Apply anti-aliasing lowpass filter\n    const filtered = this.applyFirFilter(input48k);\n\n    // Step 2: Decimate by 2 (keep every other sample)\n    const outputLength = Math.floor(filtered.length / this.decimationFactor);\n    const output24k = new Float32Array(outputLength);\n\n    for (let i = 0; i < outputLength; i++) {\n      output24k[i] = filtered[i * this.decimationFactor];\n    }\n\n    return output24k;\n  }\n\n  /**\n   * Reset filter state (call when starting new stream)\n   */\n  reset() {\n    this.stateBuffer.fill(0);\n    this.statePos = 0;\n  }\n}\n\n/**\n * Audio Dynamic Processor\n * Implements:\n * - Adaptive gain normalization\n * - Soft limiter/compressor\n * - Peak detection\n */\nexport class AudioDynamicProcessor {\n  constructor() {\n    // SIMPLIFICADO: Solo normalizaci\u00F3n suave sin complejidad innecesaria\n    this.targetRMS = 0.58; // Target RMS m\u00E1s conservador\n    this.noiseGateThreshold = 0.0008; // Threshold muy bajo - solo silencio absoluto\n    this.smoothingFactor = 0.88; // MUY suave para eliminar pumping\n    this.previousGain = 1.0; // Empezar neutral\n  }\n\n  /**\n   * Calculate RMS (Root Mean Square) level of audio buffer\n   * @param {Float32Array} buffer\n   * @returns {number} RMS level (0-1)\n   */\n  calculateRMS(buffer) {\n    let sumSquares = 0;\n    for (let i = 0; i < buffer.length; i++) {\n      sumSquares += buffer[i] * buffer[i];\n    }\n    return Math.sqrt(sumSquares / buffer.length);\n  }\n\n  /**\n   * Calculate peak level of audio buffer\n   * @param {Float32Array} buffer\n   * @returns {number} Peak level (0-1)\n   */\n  calculatePeak(buffer) {\n    let peak = 0;\n    for (let i = 0; i < buffer.length; i++) {\n      const abs = Math.abs(buffer[i]);\n      if (abs > peak) peak = abs;\n    }\n    return peak;\n  }\n\n  /**\n   * Process audio buffer - SIMPLIFICADO para claridad\n   * @param {Float32Array} buffer - Input buffer\n   * @returns {Object} {processed: Float32Array, gainApplied: number, rms: number, peak: number, saturated: boolean}\n   */\n  process(buffer) {\n    // Calculate signal level\n    const rms = this.calculateRMS(buffer);\n    const peak = this.calculatePeak(buffer);\n\n    // Calcular gain target basado en RMS\n    let targetGain = 1.0;\n\n    if (rms < this.noiseGateThreshold) {\n      // Silencio absoluto - atenuar\n      targetGain = 0.25;\n    } else if (rms < 0.35) {\n      // Voz normal - normalizar\n      targetGain = Math.min(this.targetRMS / Math.max(rms, 0.008), 2.5);\n    } else if (rms < 0.55) {\n      // Voz moderada - ajuste suave\n      targetGain = Math.max(0.95, this.targetRMS / rms);\n    } else {\n      // Voz alta - reducir levemente\n      targetGain = 0.95;\n    }\n\n    // Prevenir clipping basado en peak\n    if (peak * targetGain > 0.96) {\n      targetGain = 0.93 / peak;\n    }\n\n    // Smoothing adaptivo: m\u00E1s r\u00E1pido para bajar gain, m\u00E1s lento para subir\n    // Esto evita distorsi\u00F3n cuando RMS baja s\u00FAbitamente\n    let smoothFactor = this.smoothingFactor;\n    if (targetGain < this.previousGain) {\n      // Bajar gain m\u00E1s r\u00E1pido (menos smoothing)\n      smoothFactor = 0.75;\n    }\n\n    const gain =\n      this.previousGain * smoothFactor + targetGain * (1 - smoothFactor);\n    this.previousGain = gain;\n\n    // Aplicar gain y limiter ultra-suave\n    const processed = new Float32Array(buffer.length);\n    let saturated = false;\n\n    for (let i = 0; i < buffer.length; i++) {\n      let sample = buffer[i] * gain;\n\n      // Soft limiter con knee MUY amplio (0.80 - 0.96)\n      const absValue = Math.abs(sample);\n      if (absValue > 0.8) {\n        const excess = absValue - 0.8;\n        const kneeWidth = 0.16; // Knee m\u00E1s amplio: 0.80 a 0.96\n\n        if (excess < kneeWidth) {\n          // Soft knee con curva ultra-suave\n          const ratio = excess / kneeWidth;\n          const curve = ratio * ratio * (3 - 2 * ratio); // S-curve\n          const compressed = 0.8 + excess * (1 - curve * 0.5); // Compresi\u00F3n m\u00E1s suave\n          sample = (sample / absValue) * Math.min(compressed, 0.96);\n        } else {\n          // Hard limit en 0.96\n          sample = (sample / absValue) * 0.96;\n          saturated = true;\n        }\n      }\n\n      processed[i] = sample;\n    }\n\n    return {\n      processed,\n      gainApplied: gain,\n      rms,\n      peak,\n      saturated,\n    };\n  }\n}\n\n/**\n * Circular Buffer for zero-copy audio buffering\n * Eliminates Array.splice() overhead and reduces GC pressure\n */\nexport class CircularBuffer {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.buffer = new Float32Array(capacity);\n    this.writePos = 0;\n    this.readPos = 0;\n    this.available = 0;\n  }\n\n  /**\n   * Push a single sample into the buffer\n   */\n  push(sample) {\n    this.buffer[this.writePos] = sample;\n    this.writePos = (this.writePos + 1) % this.capacity;\n    if (this.available < this.capacity) {\n      this.available++;\n    } else {\n      // Buffer full, advance read position\n      this.readPos = (this.readPos + 1) % this.capacity;\n    }\n  }\n\n  /**\n   * Get number of samples available to read\n   */\n  get length() {\n    return this.available;\n  }\n\n  /**\n   * Read N samples into a new Float32Array (non-destructive peek)\n   * Use this when you need to pass data to WASM or other APIs\n   */\n  peek(count) {\n    if (count > this.available) {\n      throw new Error(\n        `Cannot peek ${count} samples, only ${this.available} available`\n      );\n    }\n\n    const result = new Float32Array(count);\n    let readIdx = this.readPos;\n\n    for (let i = 0; i < count; i++) {\n      result[i] = this.buffer[readIdx];\n      readIdx = (readIdx + 1) % this.capacity;\n    }\n\n    return result;\n  }\n\n  /**\n   * Consume N samples (advance read position)\n   */\n  consume(count) {\n    if (count > this.available) {\n      throw new Error(\n        `Cannot consume ${count} samples, only ${this.available} available`\n      );\n    }\n\n    this.readPos = (this.readPos + count) % this.capacity;\n    this.available -= count;\n  }\n\n  /**\n   * Read and consume N samples in one operation\n   */\n  read(count) {\n    const data = this.peek(count);\n    this.consume(count);\n    return data;\n  }\n\n  /**\n   * Clear the buffer\n   */\n  clear() {\n    this.readPos = 0;\n    this.writePos = 0;\n    this.available = 0;\n  }\n}\n", "// RNNoise Audio Worklet Source (LIGHT mode)\n// Entrada: 48kHz nativo \u2192 RNNoise @ 48kHz \u2192 Salida: 24kHz\n// Bundled with esbuild - imports Emscripten module directly\n\n// Import the Emscripten-generated module\nimport createRNNWasmModule from \"../../public/_worklets/rnnoise.js\";\n\n// Import audio processing utilities (same as DeepFilterNet)\nimport {\n  AudioResampler,\n  AudioDynamicProcessor,\n  CircularBuffer,\n} from \"../../src/utils/audioResampler.js\";\n\n// RNNoise configuration (same architecture as DeepFilterNet)\nconst RNNOISE_CONFIG = {\n  PROCESSING_RATE: 48000, // RNNoise procesa @ 48kHz\n  OUTPUT_RATE: 24000, // Resampleado a 24kHz para backend\n  FRAME_SIZE: 480, // 10ms @ 48kHz (frame nativo de RNNoise)\n};\n\n// Minimum chunk size for efficient resampling (must be even for 2:1 decimation)\nconst MIN_CHUNK_SIZE_48KHZ = 960; // 20ms @ 48kHz -> 10ms @ 24kHz\n\n// Global WASM module instance\nlet rnnoiseWasmModule = null;\nlet rnnoiseInitPromise = null;\n\nclass RNNoiseLightProcessor extends AudioWorkletProcessor {\n  constructor(options) {\n    super();\n\n    this.initialized = false;\n    this.rnnoiseState = null;\n\n    // Processing buffers @ 48kHz (RNNoise native)\n    this.inputBuffer = new Float32Array(RNNOISE_CONFIG.FRAME_SIZE);\n    this.outputBuffer = new Float32Array(RNNOISE_CONFIG.FRAME_SIZE);\n    this.bufferPos = 0;\n\n    // CRITICAL: Pre-initialization buffer to store audio BEFORE model is ready\n    this.preInitBuffer = [];\n    this.MAX_PREINIT_BUFFER = 48000 * 2; // 2 seconds max @ 48kHz\n\n    // High-quality resampler (48kHz -> 24kHz with anti-aliasing)\n    this.resampler = new AudioResampler();\n    this.downsampleBuffer = new CircularBuffer(4096); // ~85ms buffer @ 48kHz\n\n    // Dynamic audio processor (adaptive gain + soft limiter)\n    this.dynamicProcessor = new AudioDynamicProcessor();\n\n    // WASM heap buffers\n    this.heapInputBuffer = null;\n    this.heapOutputBuffer = null;\n\n    // Output buffer tracking for smooth audio\n    this.outputReadPos = 0;\n    this.outputWritePos = 0;\n\n    // Frame counter for metrics\n    this.frameCount = 0;\n\n    // CRITICAL: Control flag - only process audio when recording is active\n    this.isRecordingActive = false;\n\n    // Get WASM bytes from processor options\n    this.wasmBytes = options?.processorOptions?.wasmBytes;\n\n    console.log(\"[RNNoise LIGHT] Initializing...\");\n    console.log(\n      \"[RNNoise LIGHT] WASM bytes received:\",\n      this.wasmBytes ? \"YES\" : \"NO\"\n    );\n\n    // Listen for commands from main thread\n    this.port.onmessage = (event) => {\n      if (event.data === \"start\") {\n        console.log(\"[RNNoise LIGHT] Recording started\");\n        this.isRecordingActive = true;\n      } else if (event.data === \"stop\") {\n        console.log(\"[RNNoise LIGHT] Recording stopped\");\n        this.isRecordingActive = false;\n      } else if (event.data === \"flush\") {\n        this.flushBuffers();\n      } else if (event.data?.type === \"cleanup\") {\n        console.log(\"[RNNoise LIGHT] Cleanup requested\");\n        this.cleanup();\n      }\n    };\n\n    // Inicializar RNNoise\n    this.initRNNoise();\n  }\n\n  async initRNNoise() {\n    try {\n      console.log(\"[RNNoise LIGHT] Initializing RNNoise WASM module...\");\n\n      // Initialize the Emscripten module only once\n      if (!rnnoiseWasmModule && !rnnoiseInitPromise) {\n        if (!this.wasmBytes) {\n          throw new Error(\"WASM bytes not provided in processorOptions\");\n        }\n\n        console.log(\"[RNNoise LIGHT] Creating Emscripten module...\");\n\n        // Create the Emscripten module with custom WASM bytes\n        rnnoiseInitPromise = createRNNWasmModule({\n          wasmBinary: this.wasmBytes,\n          locateFile: (path) => {\n            // Return empty path since we're providing wasmBinary directly\n            return path;\n          },\n        });\n\n        rnnoiseWasmModule = await rnnoiseInitPromise;\n        console.log(\"[RNNoise LIGHT] \u2705 Emscripten module created\");\n      } else if (rnnoiseInitPromise) {\n        rnnoiseWasmModule = await rnnoiseInitPromise;\n      }\n\n      // Create RNNoise state\n      this.rnnoiseState = rnnoiseWasmModule._rnnoise_create(null);\n\n      if (!this.rnnoiseState) {\n        throw new Error(\"Failed to create RNNoise state\");\n      }\n\n      // Allocate buffers in WASM heap\n      const heapSize =\n        RNNOISE_CONFIG.FRAME_SIZE * Float32Array.BYTES_PER_ELEMENT;\n\n      this.heapInputBuffer = rnnoiseWasmModule._malloc(heapSize);\n      this.heapOutputBuffer = rnnoiseWasmModule._malloc(heapSize);\n\n      if (!this.heapInputBuffer || !this.heapOutputBuffer) {\n        throw new Error(\"Failed to allocate WASM heap buffers\");\n      }\n\n      this.initialized = true;\n\n      console.log(\"[RNNoise LIGHT] \u2705 Initialized successfully!\");\n      console.log(\n        `[RNNoise LIGHT] Processing: ${RNNOISE_CONFIG.PROCESSING_RATE}Hz \u2192 Output: ${RNNOISE_CONFIG.OUTPUT_RATE}Hz`\n      );\n      console.log(\n        `[RNNoise LIGHT] Frame size: ${RNNOISE_CONFIG.FRAME_SIZE} samples (10ms @ 48kHz)`\n      );\n\n      // Notify main thread\n      this.port.postMessage(\"ready\");\n    } catch (error) {\n      console.error(\"[RNNoise LIGHT] \u274C Initialization failed:\", error);\n      this.port.postMessage({ type: \"error\", message: error.message });\n    }\n  }\n\n  async loadRNNoiseWasm(wasmBytes) {\n    // Crear un m\u00F3dulo Emscripten m\u00EDnimo compatible\n    // RNNoise usa Emscripten, necesitamos proporcionar el entorno\n\n    const imports = {\n      env: {\n        memory: new WebAssembly.Memory({ initial: 256, maximum: 256 }),\n        __memory_base: 0,\n        __table_base: 0,\n        table: new WebAssembly.Table({ initial: 0, element: \"anyfunc\" }),\n        abort: () => console.error(\"WASM abort called\"),\n        _emscripten_memcpy_big: (dest, src, num) => {\n          const mem = new Uint8Array(imports.env.memory.buffer);\n          mem.copyWithin(dest, src, src + num);\n          return dest;\n        },\n      },\n    };\n\n    const { instance } = await WebAssembly.instantiate(wasmBytes, imports);\n\n    // Crear interfaz compatible con Emscripten\n    const module = {\n      _rnnoise_create: instance.exports.rnnoise_create,\n      _rnnoise_destroy: instance.exports.rnnoise_destroy,\n      _rnnoise_process_frame: instance.exports.rnnoise_process_frame,\n      _malloc: instance.exports.malloc,\n      _free: instance.exports.free,\n      HEAPF32: new Float32Array(imports.env.memory.buffer),\n      HEAP8: new Int8Array(imports.env.memory.buffer),\n    };\n\n    return module;\n  }\n\n  process(inputs, outputs) {\n    const input = inputs[0];\n    const output = outputs[0];\n\n    if (!input || !input[0] || !output || !output[0]) {\n      return true;\n    }\n\n    const inputChannel = input[0];\n    const outputChannel = output[0];\n\n    // CRITICAL: Only process audio when recording is active\n    if (!this.isRecordingActive) {\n      return true;\n    }\n\n    // Wait until initialized\n    if (!this.initialized) {\n      return true;\n    }\n    const blockSize = inputChannel.length;\n\n    // Output buffer tracking\n    let outputReadPos = this.outputReadPos || 0;\n    let outputWritePos = this.outputWritePos || 0;\n\n    // Process input samples @ 48kHz\n    for (let i = 0; i < blockSize; i++) {\n      // Accumulate input @ 48kHz\n      this.inputBuffer[this.bufferPos++] = inputChannel[i];\n\n      // When we have a complete frame @ 48kHz, process it\n      if (this.bufferPos >= RNNOISE_CONFIG.FRAME_SIZE) {\n        this.processFrame();\n        this.bufferPos = 0;\n\n        // Mark that we have a processed frame available\n        outputWritePos = RNNOISE_CONFIG.FRAME_SIZE;\n      }\n    }\n\n    // Accumulate processed frames @ 48kHz for resampling\n    if (outputWritePos > 0) {\n      // Push entire processed frame to downsample buffer\n      for (let i = 0; i < RNNOISE_CONFIG.FRAME_SIZE; i++) {\n        this.downsampleBuffer.push(this.outputBuffer[i]);\n      }\n\n      outputWritePos = 0;\n      outputReadPos = 0;\n    }\n\n    // Check if we have enough samples @ 48kHz for resampling (same as DeepFilterNet)\n    if (this.downsampleBuffer.length >= MIN_CHUNK_SIZE_48KHZ) {\n      // Calculate how many complete chunks we can create (even number for proper decimation)\n      const samplesToProcess = Math.floor(this.downsampleBuffer.length / 2) * 2;\n\n      // Extract samples to process (zero-copy read)\n      const input48k = this.downsampleBuffer.read(samplesToProcess);\n\n      // \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n      // STEP 1: High-quality resampling with anti-aliasing FIR filter\n      // \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n      const resampled24k = this.resampler.resample48to24(input48k);\n\n      // \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n      // STEP 2: Adaptive gain normalization + soft limiting\n      // \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n      const { processed, gainApplied, rms, peak, saturated } =\n        this.dynamicProcessor.process(resampled24k);\n\n      // \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n      // STEP 3: Convert Float32 [-1, 1] to PCM16 [-32768, 32767]\n      // \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n      const pcm16 = new Int16Array(processed.length);\n      for (let i = 0; i < processed.length; i++) {\n        const pcmValue = processed[i] * 32768;\n        pcm16[i] = Math.max(-32768, Math.min(32767, Math.round(pcmValue)));\n      }\n\n      // Log with audio metrics (throttled to avoid spam)\n      this.frameCount++;\n      if (this.frameCount % 50 === 0) {\n        const satIcon = saturated ? \"\uD83D\uDD34\" : \"\uD83D\uDFE2\";\n        console.log(\n          `[RNNoise LIGHT] ${satIcon} PCM16: ${pcm16.length} samples @ 24kHz | ` +\n            `Gain: ${gainApplied.toFixed(2)}x | RMS: ${(rms * 100).toFixed(\n              1\n            )}% | Peak: ${(peak * 100).toFixed(1)}%`\n        );\n      }\n\n      this.port.postMessage(\n        {\n          type: \"pcm16\",\n          data: pcm16.buffer,\n        },\n        [pcm16.buffer]\n      );\n    }\n\n    // Save state for next call\n    this.outputReadPos = outputReadPos;\n    this.outputWritePos = outputWritePos;\n\n    // Silent output (we send data via postMessage, not audio output)\n    if (outputChannel) {\n      outputChannel.fill(0);\n    }\n\n    return true;\n  }\n\n  processFrame() {\n    try {\n      // Copiar input al heap de WASM\n      rnnoiseWasmModule.HEAPF32.set(\n        this.inputBuffer,\n        this.heapInputBuffer / Float32Array.BYTES_PER_ELEMENT\n      );\n\n      // Procesar frame con RNNoise\n      // rnnoise_process_frame devuelve VAD probability (no lo usamos aqu\u00ED)\n      rnnoiseWasmModule._rnnoise_process_frame(\n        this.rnnoiseState,\n        this.heapOutputBuffer,\n        this.heapInputBuffer\n      );\n\n      // Copiar output del heap de WASM\n      this.outputBuffer.set(\n        rnnoiseWasmModule.HEAPF32.subarray(\n          this.heapOutputBuffer / Float32Array.BYTES_PER_ELEMENT,\n          this.heapOutputBuffer / Float32Array.BYTES_PER_ELEMENT +\n            RNNOISE_CONFIG.FRAME_SIZE\n        )\n      );\n    } catch (error) {\n      console.error(\"[RNNoise LIGHT] Frame processing error:\", error);\n      // En caso de error, pasar audio sin procesar\n      this.outputBuffer.set(this.inputBuffer);\n    }\n  }\n\n  cleanup() {\n    console.log(\"[RNNoise LIGHT] Cleaning up resources...\");\n    \n    if (this.rnnoiseState && rnnoiseWasmModule) {\n      try {\n        rnnoiseWasmModule._rnnoise_destroy(this.rnnoiseState);\n        console.log(\"[RNNoise LIGHT] \u2705 RNNoise state destroyed\");\n      } catch (e) {\n        console.warn(\"[RNNoise LIGHT] Error destroying state:\", e);\n      }\n      this.rnnoiseState = null;\n    }\n    \n    if (this.heapInputBuffer && rnnoiseWasmModule) {\n      try {\n        rnnoiseWasmModule._free(this.heapInputBuffer);\n      } catch (e) {\n        console.warn(\"[RNNoise LIGHT] Error freeing input buffer:\", e);\n      }\n      this.heapInputBuffer = null;\n    }\n    \n    if (this.heapOutputBuffer && rnnoiseWasmModule) {\n      try {\n        rnnoiseWasmModule._free(this.heapOutputBuffer);\n      } catch (e) {\n        console.warn(\"[RNNoise LIGHT] Error freeing output buffer:\", e);\n      }\n      this.heapOutputBuffer = null;\n    }\n    \n    this.initialized = false;\n    console.log(\"[RNNoise LIGHT] \u2705 Cleanup complete\");\n  }\n\n  flushBuffers() {\n    console.log(\"[RNNoise LIGHT] Flushing remaining buffers before stop...\");\n\n    if (!this.initialized) {\n      console.log(\"[RNNoise LIGHT] Not initialized, nothing to flush\");\n      return;\n    }\n\n    // Process remaining samples in inputBuffer\n    // Only process if we have a complete frame, otherwise discard to avoid artificial silence\n    if (this.bufferPos >= RNNOISE_CONFIG.FRAME_SIZE) {\n      console.log(\n        `[RNNoise LIGHT] Flushing complete frame: ${this.bufferPos} samples`\n      );\n\n      // Process final frame\n      this.processFrame();\n\n      // Add to downsample buffer\n      for (let i = 0; i < this.outputBuffer.length; i++) {\n        this.downsampleBuffer.push(this.outputBuffer[i]);\n      }\n\n      this.bufferPos = 0;\n    } else if (this.bufferPos > 0) {\n      console.log(\n        `[RNNoise LIGHT] Discarding incomplete frame: ${this.bufferPos} samples (< ${RNNOISE_CONFIG.FRAME_SIZE})`\n      );\n      // Clear incomplete frame\n      this.bufferPos = 0;\n    }\n\n    // Send remaining downsample buffer\n    if (this.downsampleBuffer.length > 0) {\n      console.log(\n        `[RNNoise LIGHT] Flushing ${this.downsampleBuffer.length} samples from downsampleBuffer`\n      );\n\n      // Process even number of samples for proper decimation\n      const samplesToFlush = Math.floor(this.downsampleBuffer.length / 2) * 2;\n      const input48k = this.downsampleBuffer.read(samplesToFlush);\n\n      // Resample to 24kHz\n      const resampled24k = this.resampler.resample48to24(input48k);\n\n      const { processed } = this.dynamicProcessor.process(resampled24k);\n\n      const pcm16 = new Int16Array(processed.length);\n      for (let i = 0; i < processed.length; i++) {\n        const pcmValue = processed[i] * 32768;\n        pcm16[i] = Math.max(-32768, Math.min(32767, Math.round(pcmValue)));\n      }\n\n      console.log(`[RNNoise LIGHT] \u2705 Flushed final ${pcm16.length} samples`);\n\n      this.port.postMessage(\n        {\n          type: \"pcm16\",\n          data: pcm16.buffer,\n        },\n        [pcm16.buffer]\n      );\n    }\n\n    console.log(\"[RNNoise LIGHT] \u2705 Flush complete\");\n  }\n}\n\nregisterProcessor(\"rnnoise-processor\", RNNoiseLightProcessor);\n"],
  "mappings": "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",
  "names": ["createRNNWasmModule", "err", "exports"]
}
